<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R wrapper for the gnfinder library • gnfinderr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An R wrapper for the gnfinder library">
<meta property="og:description" content="Provides a wrapper for the gnfinder library for taxonomic name extraction from texts.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gnfinderr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/poldham/gnfinderr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="gnfinderr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#gnfinderr" class="anchor"></a>gnfinderr</h1></div>
<!-- badges: start -->

<p><code>gnfindrr</code> is an experimental R wrapper for the <a href="https://github.com/gnames/gnfinder">gnfinder library</a> for scientific name discovery in texts created by <a href="https://github.com/dimus">Dmitry Mozzherin</a>. gnfinder forms part of the Glonal Names suite of tools for working with taxonomic names and biodiversity data. gnfinder is presently available as a command line tool and can also be used as a gRPC service, a library or in a docker container. gnfinder is used to text mine the Biodiversity Heritage Library for taxonomic names.</p>
<p>This package has the modest ambition of providing a thin wrapper in R with a focus on text mining data frames and returning data frames to the user. <code>gnfinderr</code> uses the tidyverse and include the pipe <code><a href="reference/pipe.html">%&gt;%</a></code>.</p>
<p>It is at an early experimental stage and just maps the main results to a data frame.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>gnfinderr is not on CRAN. The development version can be installed from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"poldham/gnfinderr"</span>)</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is presently a one function package.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">gnfinderr</span>)

<span class="no">intro</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/gnfinder.html">gnfinder</a></span>(<span class="kw">string</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Lepidium meyennii is a hot plant."</span>, <span class="st">"Escherichia coli is not a plant at all"</span>))</pre></div>
<p><code>gnfinderr</code> is intended to be informative and to fail fast. The default search uses the combination of dictionaries and bayes regression that power gnfinder and will check any names discovered against the Catalogue of Life (by default)</p>
<p>An id column is generated and mapped to the input texts to facilitate joins. Alternatively you can provide ids at input. Example datasets of various sizes are provided to experiment with. Here we use the small fivetexts dataset to pass document ids to join the results.</p>
<p>Most of the functions in gnfinder are available (except language options and metadata is not returned). By default all available arguments are TRUE (bayes is on). We can change the setting by entering a value in the relevant argument.</p>
<p>Turning off check_names will speed up processing and simplify the returns</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">gnfinderr</span>)

<span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/gnfinder.html">gnfinder</a></span>(<span class="kw">string</span> <span class="kw">=</span> <span class="no">five</span>$<span class="no">text</span>, <span class="kw">id</span> <span class="kw">=</span> <span class="no">five</span>$<span class="no">id</span>, <span class="kw">check_names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></div>
<p>You can also turn off the Bayes regression by entering a value for <code>nobayes</code>:</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/gnfinder.html">gnfinder</a></span>(<span class="kw">string</span> <span class="kw">=</span> <span class="no">five</span>$<span class="no">text</span>, <span class="kw">id</span> <span class="kw">=</span> <span class="no">five</span>$<span class="no">id</span>, <span class="kw">nobayes</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">check_names</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></div>
<p>In general name discovery in texts is facilitated by leaving the bayes setting as is.</p>
<p>When working with gnfinder it is best to be selective in the use of texts to facilitate matching. Thus, if you include article metadata such as author names and organisations you may get unexpected false positive matches.</p>
<div id="specifying-sources-for-check-names" class="section level3">
<h3 class="hasAnchor">
<a href="#specifying-sources-for-check-names" class="anchor"></a>Specifying Sources for Check Names</h3>
<p>By default <code>gnfinderr</code> checks names against the Catalogue of Life Taxonomy. The results are returned in a set of data.frames under verification and include a best result.</p>
<p>For a list of available sources see <a href="https://index.globalnames.org/datasource">https://index.globalnames.org/datasource</a>. Here we will check against the <a href="https://www.catalogueoflife.org/">Catalogue of Life</a> (1), the <a href="https://www.gbif.org/dataset/d7dddbf4-2cf0-4f39-9b2a-bb099caae36c">Global Biodiversity Information Facility (GBIF) Backbone Taxonomy</a> (11) and the <a href="https://tree.opentreeoflife.org/about/taxonomy-version/ott3.2">Open Tree of Life Reference Taxonomy</a> (179)</p>
<p>We can specify the source we would like to check by supplying a vector of ids to <code>source_ids</code>.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/gnfinder.html">gnfinder</a></span>(<span class="kw">string</span> <span class="kw">=</span> <span class="no">five</span>$<span class="no">text</span>, <span class="kw">id</span> <span class="kw">=</span> <span class="no">five</span>$<span class="no">id</span>, <span class="kw">source_ids</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">11</span>,<span class="fl">179</span>))</pre></div>
<p>This will return a tibble (data frame) that contains other data frames under <code>verification</code>.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="no">df</span>$<span class="no">verification</span></pre></div>
<p>The verification table contains bestresult and preferredresults dfs, where the best result is for the best match and the preferred results are from the taxonomic services in <code>source_ids</code>. These tables include details of the taxon ids and taxonomic hierarchy.</p>
</div>
<div id="limitations" class="section level3">
<h3 class="hasAnchor">
<a href="#limitations" class="anchor"></a>Limitations</h3>
<p>gnfinder works with UTF8 texts and should not be expected to work with other kinds of texts. If you don’t know whether you have utf8 formatted text the package should tell you when you enter your texts.</p>
<p>R runs on a single core and so, for the time being, does <code>gnfinderr</code> with work planned to use the <code>future</code> package to work in parallel. As such, expect the package to be slow on large numbers of texts. Perhaps turn off <code>check_names</code> for a performance boost.</p>
</div>
<div id="future-plans" class="section level3">
<h3 class="hasAnchor">
<a href="#future-plans" class="anchor"></a>Future plans</h3>
<p>At this early stage the focus is on:</p>
<ul>
<li>Improving the code</li>
<li>Allowing a user to return the raw json to file with identifiers</li>
<li>Returning the metadata</li>
<li>Examining ways to access nested data frames with document identifiers</li>
<li>Adding parallel processing with the <code>future</code> package</li>
<li>Linking through to R packages such as taxize and rgbif</li>
<li>Following the ROpenSci guide for package submission</li>
</ul>
<p>Suggestions and comments are welcome on the <a href="https://github.com/poldham/gnfinderr/issues">Github Issues</a> page. A <a href="https://github.com/poldham/gnfinderr/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a> is provided for collaborators.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/poldham/gnfinderr/">https://​github.com/​poldham/​gnfinderr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/poldham/gnfinderr/issues">https://​github.com/​poldham/​gnfinderr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Paul Oldham <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1013-4390" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Paul Oldham.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
